# 4. 寻找两个正序数组的中位数

https://leetcode-cn.com/problems/median-of-two-sorted-arrays/

## 题目描述

```
给定两个大小为 m 和 n 的正序（从小到大）数组 nums1 和 nums2。

请你找出这两个正序数组的中位数，并且要求算法的时间复杂度为 O(log(m + n))。

你可以假设 nums1 和 nums2 不会同时为空。

 

示例 1:

nums1 = [1, 3]
nums2 = [2]

则中位数是 2.0
示例 2:

nums1 = [1, 2]
nums2 = [3, 4]

则中位数是 (2 + 3)/2 = 2.5

```

## 前置知识

- 中位数
- 分治法
- 二分查找

## 公司

- 阿里
- 百度
- 腾讯

## 暴力法

```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int n1 = nums1.length;
        int n2 = nums2.length;
        int[] a = new int[n1 + n2];
        int i = 0, j = 0, k = 0;
        while(i < n1 && j < n2) {
            if(nums1[i] < nums2[j]) a[k++] = nums1[i++];
            else a[k++] = nums2[j++];
        }
        while(i < n1) a[k++] = nums1[i++];
        while(j < n2) a[k++] = nums2[j++];
        if((n1 + n2) % 2 == 1) return a[(n1 + n2) / 2] * 1.0;
        return (a[(n1 + n2) / 2 - 1] + a[(n1 + n2) / 2]) / 2.0;
    }
}
```



## 二分查找

```java
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int n1 = nums1.length;
        int n2 = nums2.length;
        int n = n1 + n2;
        if(n % 2 == 0) {
            int left = findK(nums1, nums2, n / 2);
            int right = findK(nums1, nums2, n / 2 + 1);
            // System.out.println("left: " + left + "----right: " + right);
            return (left + right) / 2.0;
        }
        return (double) findK(nums1, nums2, n / 2 + 1);
    }
    public int findK(int[] nums1, int[] nums2, int k) {
        int n1 = nums1.length;
        int n2 = nums2.length;
        // 表示第 idx1 小，比下标大 1
        int idx1 = 0, idx2 = 0;
        while(true) {
            if(idx1 == n1) return nums2[idx2 + k - 1];
            if(idx2 == n2) return nums1[idx1 + k - 1];
            if(k == 1) {
                return Math.min(nums1[idx1], nums2[idx2]);
            }
            
            int half = k / 2;
            int nidx1 = Math.min(idx1 + half, n1) - 1;
            int nidx2 = Math.min(idx2 + half, n2) - 1;
            int p1 = nums1[nidx1], p2 = nums2[nidx2];
            if(p1 <= p2) {
                k -= (nidx1 - idx1 + 1);
                idx1 = nidx1 + 1;
            }
            else {
                k -= (nidx2 - idx2 + 1);
                idx2 = nidx2 + 1;
            }
        }
    }
}
```

